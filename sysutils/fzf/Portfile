# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

version             0.17.3
github.setup        junegunn fzf ${version}

categories          sysutils
platforms           darwin
license             MIT

maintainers         gmail.com:intact79 \
                    openmaintainer
description         command-line fuzzy finder
long_description    fzf is a general-purpose command-line fuzzy finder.

homepage            https://github.com/junegunn/fzf

depends_build       port:go
use_configure       no
dist_subdir         go

checksums           fzf-${version}.tar.gz \
                        md5     21bb990f437c063fd5e40555a96ea5bc \
                        sha1    7680e5001e71cc2adb3b623d484188ca055083cf \
                        sha256  b08d6f5f37d204c2313aebfaf4e4a7c24bc7d2bc3a9dd78fbe8bce6dd2f60c8e

build.cmd           make
build.target        bin/fzf
build.env           GOPATH="${workpath}"

destroot {
    # Install fzf, fzf-tmux
    xinstall ${worksrcpath}/bin/fzf ${destroot}${prefix}/bin
    xinstall ${worksrcpath}/bin/fzf-tmux ${destroot}${prefix}/bin

    # Documentation
    xinstall -d ${destroot}${prefix}/share/doc/${name}
    xinstall -m 644 -W ${worksrcpath} README.md LICENSE CHANGELOG.md \
        ${destroot}${prefix}/share/doc/${name}

    # Man pages
    xinstall -d ${destroot}${prefix}/share/man/man1
    xinstall -m 644 {*}[glob ${worksrcpath}/man/man1/*.1] \
        ${destroot}${prefix}/share/man/man1

    # Install shell completion and key-bindings
    xinstall -d ${destroot}${prefix}/share/${name}/shell
    xinstall -m 644 {*}[glob ${worksrcpath}/shell/*] \
        ${destroot}${prefix}/share/${name}/shell

    # Install vim plugin
    xinstall -d ${destroot}${prefix}/share/${name}/plugin
    xinstall -m 644 {*}[glob ${worksrcpath}/plugin/*] \
        ${destroot}${prefix}/share/${name}/plugin
}
